var single=function(){var e=null,t=function(t,n){var a,r,i,l=t.options[n.target.getAttribute("single-index")];l.disabled||(l.selected?(l.selected=!1,e=null):(l.selected=!0,e=l.value),a="change",r=t,(i=document.createEvent("HTMLEvents")).initEvent(a,!1,!0),r.dispatchEvent(i))},n=function(t,n){if(t.wrapper.selected.innerHTML="",t.wrapper.non_selected.innerHTML="",t.wrapper.search)var a=t.wrapper.search.value;for(var r=0;r<t.options.length;r++){var i=t.options[r],l=i.value,s=i.textContent||i.innerText,d=document.createElement("a");if(d.tabIndex=0,d.className="item",d.innerHTML=s,d.setAttribute("role","button"),d.setAttribute("data-value",l),d.setAttribute("single-index",r),i.disabled&&(d.className+=" disabled"),i.value==e){d.className+=" selected";var c=d.cloneNode(!0);t.wrapper.selected.appendChild(c)}(!a||a&&s.toLowerCase().indexOf(a.toLowerCase())>-1)&&t.wrapper.non_selected.appendChild(d)}};return function(a,r){if((r=void 0!==r?r:{}).enable_search=void 0===r.enable_search||r.enable_search,r.search_placeholder=void 0!==r.search_placeholder?r.search_placeholder:"Search...",null==a.dataset.singlejs&&"SELECT"==a.nodeName){a.style.display="none",a.setAttribute("data-singlejs",!0);var i=document.createElement("div");if(i.className="single-wrapper",r.enable_search){var l=document.createElement("input");l.className="search-input",l.type="text",l.setAttribute("placeholder",r.search_placeholder),l.addEventListener("input",function(){n(a)}),i.appendChild(l),i.search=l}var s=document.createElement("div");s.className="non-selected-wrapper";var d=document.createElement("div");d.className="selected-wrapper",i.addEventListener("click",function(e){e.target.getAttribute("single-index")&&t(a,e)}),i.addEventListener("keypress",function(e){var n=32===e.keyCode||13===e.keyCode;e.target.getAttribute("single-index")&&n&&(e.preventDefault(),t(a,e))}),i.appendChild(s),i.appendChild(d),i.non_selected=s,i.selected=d,a.wrapper=i,a.parentNode.insertBefore(i,a.nextSibling),null!==a.value&&(e=a.value),n(a),a.addEventListener("change",function(){n(a)})}}}();"undefined"!=typeof jQuery&&function(e){e.fn.single=function(t){return t=void 0!==t?t:{},this.each(function(){var n=e(this);single(n.get(0),t)})}}(jQuery);